import{r as i,c as t,h as s,H as h,g as a}from"./p-1eafec4e.js";import{c as e}from"./p-a5313538.js";const o=class{constructor(s){i(this,s),this.type="horizontal",this.fpadding="0",this.defBlocks=!1,this._typeArray=["horizontal","vertical"],this._localCSS={},this.dimImgloaded=t(this,"jeepFlipImagesImgLoaded",7)}parseTypeProp(i){this.innerType=i&&this._typeArray.indexOf(i)>=0?i:"horizontal"}parseFpaddingProp(i){this.innerPadding=i?parseFloat(i):0}async handleDimImgloaded(i){let t=i.detail;this._preload(this._imagesUrl,2,this._imagesUrl.length-1),this.imageRatio=t.naturalHeight/t.naturalWidth,this._bbContainer=this._container.getBoundingClientRect(),this._imageWidth=this._bbContainer.width-2*this.innerPadding-2*e(this._localCSS.borderWidth)-2*e(this._localCSS.shadowWidth),this._imageHeight=Math.floor(this._imageWidth*this.imageRatio),await this._checkImageWidthHeight(),this._container.removeChild(this._imgDim),this._flipToggle=this._container.querySelector("#flip-toggle"),"vertical"===this.innerType?(this._backImg1=this._flipToggle.querySelector("#image-back-left"),this._backImg2=this._flipToggle.querySelector("#image-back-right"),this._frontImg1=this._flipToggle.querySelector("#image-front-left"),this._frontImg2=this._flipToggle.querySelector("#image-front-right")):(this._backImg1=this._flipToggle.querySelector("#image-back-top"),this._backImg2=this._flipToggle.querySelector("#image-back-bottom"),this._frontImg1=this._flipToggle.querySelector("#image-front-top"),this._frontImg2=this._flipToggle.querySelector("#image-front-bottom")),this._setCssProperties(),this._flipToggle.classList.add("flipvisible"),this.defBlocks=!0}async init(){return await this._init()}async componentWillLoad(){this._window=window,await this._init(),this._window.addEventListener("resize",async()=>{this._bbContainer=this._container.getBoundingClientRect(),this._imageWidth=this._bbContainer.width-2*this.innerPadding-2*e(this._localCSS.borderWidth)-2*e(this._localCSS.shadowWidth),this._imageHeight=Math.floor(this._imageWidth*this.imageRatio),await this._checkImageWidthHeight(),this._setCssProperties(),this.defBlocks=!0},!1)}async componentDidLoad(){this._element=this.el.shadowRoot,null!=this._flipElements&&this._getImageDim()}async _init(){this._document=this._window.document,this._root=this._document.documentElement,this.parseTypeProp(this.type?this.type:"horizontal"),this.parseFpaddingProp(this.fpadding?this.fpadding:"0"),this._getElementList(),this._indexFront=0,this._indexBack=this._imagesUrl.length>1?1:0,this.toggle=!1,this._flipUp=!1,this._flipLeft=!1,this._mouseStart=!1,this._mouseMove=!1,this._flipElements=null,this._first=!0,this._localCSS.shadowWidth=window.getComputedStyle(this.el).getPropertyValue("--flipimages-shadow-width"),this._localCSS.shadowColor=window.getComputedStyle(this.el).getPropertyValue("--flipimages-shadow-color"),this._localCSS.borderWidth=window.getComputedStyle(this.el).getPropertyValue("--flipimages-border-width"),this._localCSS.borderColor=window.getComputedStyle(this.el).getPropertyValue("--flipimages-border-color"),this.el.style.setProperty("--container-padding",this.innerPadding.toString()+"px")}_getImageDim(){this._container=this._element.querySelector(".container"),this._imgDim=this._container.querySelector(".image-dim");let i=this._imgDim.querySelector("img");i.onload=async()=>{this._images=[],await this._preload(this._imagesUrl,0,1),this.dimImgloaded.emit(i)}}_setCssProperties(){this.el.style.setProperty("--image-height",this._imageHeight.toString()+"px"),this.el.style.setProperty("--image-width",this._imageWidth.toString()+"px"),this.el.style.setProperty("--container-padding",this.innerPadding.toString()+"px")}async _preload(i,t,s){return new Promise(async h=>{for(let a=t;a<s+1;a++){if("http"===i[a].substring(0,4)){let t=await this._toDataUrl(i[a]);this._images=[...this._images,t]}else this._images=[...this._images,i[a]];a===s&&h()}})}async _toDataUrl(i){return new Promise(t=>{fetch(i,{method:"GET"}).then(i=>i.blob()).then(i=>{const s=new FileReader;s.addEventListener("load",()=>{t(s.result)},!1),s.readAsDataURL(i)}).catch(async i=>{console.log("Error: ",i.message),t()})})}_getElementList(){this._imagesUrl=[],this._alts=[];for(let i=0;i<this.el.childElementCount;i++)this._imagesUrl.push(this.el.children[i].getAttribute("src")),this._alts.push(this.el.children[i].getAttribute("alt"));this._removeChilds(this.el)}_removeChilds(i){for(;i.firstChild;)i.removeChild(i.firstChild)}async _checkImageWidthHeight(){let i=Math.floor(this._bbContainer.height-2*this.innerPadding-2*e(this._localCSS.borderWidth)-2*e(this._localCSS.shadowWidth));this._imageHeight>i&&(this._imageHeight=i,this._imageWidth=Math.floor(this._imageHeight/this.imageRatio))}_handleMoveEventTarget(){"horizontal"===this.innerType?this._stPoint.y<this._bbContainer.height/2?(this._top=!0,this._flipUp=this._mvPoint.y<this._stPoint.y):(this._top=!1,this._flipUp=this._mvPoint.y<this._stPoint.y):"vertical"===this.innerType&&(this._stPoint.x<this._bbContainer.width/2?(this._left=!0,this._flipLeft=this._mvPoint.x<this._stPoint.x):(this._left=!1,this._flipLeft=this._mvPoint.x<this._stPoint.x))}_handleEndEventTarget(){this._flipToggle.classList&&("horizontal"===this.innerType?this._handleToggle(this._top,this._flipUp):"vertical"===this.innerType&&this._handleToggle(this._left,this._flipLeft))}_handleToggle(i,t){this.toggle?i?this._doToggle=!1:(this._doToggle=!0,t?(this._indexBack=this._indexFront+1,this._indexBack===this._images.length&&(this._indexBack=0)):(this._indexFront=this._indexBack-1,this._indexFront<0&&(this._indexFront=this._images.length-1)),this._flipToggle.classList.toggle("toggle"),this.toggle=!this.toggle):i?(this._doToggle=!0,t?(this._indexBack=this._indexFront-1,-1===this._indexBack&&(this._indexBack=this._images.length-1)):(this._indexFront=this._indexBack+1,this._indexFront===this._images.length&&(this._indexFront=0)),this._flipToggle.classList.toggle("toggle"),this.toggle=!this.toggle):this._doToggle=!1}_handleMouseDown(i){i.preventDefault(),this._stPoint={x:i.pageX,y:i.pageY},this._mouseMove=!1,this._mouseStart=!0}_handleMouseMove(i){i.preventDefault(),this._mouseStart&&(this._mouseMove=!0,this._mvPoint={x:i.pageX,y:i.pageY},this._handleMoveEventTarget())}_handleMouseEnd(){this._mouseMove&&(this._handleEndEventTarget(),this._mouseStart=!1,this._mouseMove=!1)}_handleTouchStart(i){i.preventDefault(),this._stPoint={x:i.touches[0].pageX,y:i.touches[0].pageY},this._mouseStart=!0}_handleTouchMove(i){i.preventDefault(),this._mvPoint={x:i.touches[0].pageX,y:i.touches[0].pageY},this._mouseMove=!0,this._handleMoveEventTarget()}_handleTouchEnd(){this._mouseMove&&(this._handleEndEventTarget(),this._mouseStart=!1,this._mouseMove=!1)}renderFlipImages(){this._first?(this._first=!1,this._frontImg1.setAttribute("src",this._images[this._indexFront]),this._frontImg2.setAttribute("src",this._images[this._indexFront]),this._backImg1.setAttribute("src",this._images[this._indexBack]),this._backImg2.setAttribute("src",this._images[this._indexBack]),null!==this._alts[this._indexFront]&&(this._frontImg1.setAttribute("alt",this._alts[this._indexFront]),this._frontImg2.setAttribute("alt",this._alts[this._indexFront])),null!==this._alts[this._indexBack]&&(this._backImg1.setAttribute("alt",this._alts[this._indexBack]),this._backImg2.setAttribute("alt",this._alts[this._indexBack]))):this._doToggle&&(this.toggle?(this._backImg1.setAttribute("src",this._images[this._indexBack]),this._backImg2.setAttribute("src",this._images[this._indexBack]),null!==this._alts[this._indexBack]&&(this._backImg1.setAttribute("alt",this._alts[this._indexBack]),this._backImg2.setAttribute("alt",this._alts[this._indexBack]))):(this._frontImg1.setAttribute("src",this._images[this._indexFront]),this._frontImg2.setAttribute("src",this._images[this._indexFront]),null!==this._alts[this._indexFront]&&(this._frontImg1.setAttribute("alt",this._alts[this._indexFront]),this._frontImg2.setAttribute("alt",this._alts[this._indexFront]))))}render(){return null===this._flipElements?this._flipElements="horizontal"==this.innerType?[s("div",{class:"container"},s("div",{class:"image-dim"},s("img",{src:this._imagesUrl[0],alt:this._alts[0]})),s("div",{class:"flip-container horizontal",id:"flip-toggle",onMouseDown:this._handleMouseDown.bind(this),onMouseMove:this._handleMouseMove.bind(this),onMouseUp:this._handleMouseEnd.bind(this),onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)},s("div",{class:"back-top",id:"back-top"},s("div",{class:"image-back-top"},s("img",{id:"image-back-top"}))),s("div",{class:"flipper",id:"flipper"},s("div",{class:"front-top",id:"front-top"},s("div",{class:"image-front-top"},s("img",{id:"image-front-top"}))),s("div",{class:"back-bottom",id:"back-bottom"},s("div",{class:"image-back-bottom"},s("img",{id:"image-back-bottom"})))),s("div",{class:"front-bottom",id:"front-bottom"},s("div",{class:"image-front-bottom"},s("img",{id:"image-front-bottom"})))))]:"vertical"==this.innerType?[s("div",{class:"container"},s("div",{class:"image-dim"},s("img",{src:this._imagesUrl[0],alt:this._alts[0]})),s("div",{class:"flip-container vertical",id:"flip-toggle",onMouseDown:this._handleMouseDown.bind(this),onMouseMove:this._handleMouseMove.bind(this),onMouseUp:this._handleMouseEnd.bind(this),onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)},s("div",{class:"back-left",id:"back-left"},s("div",{class:"image-back-left"},s("img",{id:"image-back-left"}))),s("div",{class:"flipper",id:"flipper"},s("div",{class:"front-left",id:"front-left"},s("div",{class:"image-front-left"},s("img",{id:"image-front-left"}))),s("div",{class:"back-right",id:"back-right"},s("div",{class:"image-back-right"},s("img",{id:"image-back-right"})))),s("div",{class:"front-right",id:"front-right"},s("div",{class:"image-front-right"},s("img",{id:"image-front-right"})))))]:null:this.defBlocks&&this.renderFlipImages(),s(h,null,s("slot",null,this._flipElements))}get el(){return a(this)}static get watchers(){return{type:["parseTypeProp"],fpadding:["parseFpaddingProp"]}}static get style(){return":host{--flipimages-border-width:10px;--flipimages-border-color:#fff;--flipimages-shadow-width:20px;--flipimages-shadow-color:grey;--image-height:720px;--image-width:1280px;--container-padding:0px}.imghidden{display:none;visibility:hidden}.container{position:absolute;bottom:0;right:0;overflow:hidden;-ms-flex-pack:center;justify-content:center;padding:var(--container-padding)}.container,.image-dim{top:0;left:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.image-dim{position:relative;visibility:hidden;width:100%;height:100%;z-index:10}.image-dim img{max-width:100%;max-height:100%;visibility:hidden;overflow:hidden}.flip-container{width:var(--image-width);height:var(--image-height);margin:0;-webkit-perspective:calc(2 * var(--image-width));perspective:calc(2 * var(--image-width));-webkit-box-shadow:0 0 var(--flipimages-shadow-width) 2px var(--flipimages-shadow-color);box-shadow:0 0 var(--flipimages-shadow-width) 2px var(--flipimages-shadow-color);border-color:var(--flipimages-border-color);border-style:solid;border-width:var(--flipimages-border-width);border-radius:var(--flipimages-border-width);visibility:hidden}.flipvisible{visibility:visible}.toggle.horizontal.flip-container .flipper{transform:rotateX(-180deg);-moz-transform:rotateX(-180deg);-webkit-transform:rotateX(-180deg)}.toggle.horizontal.flip-container .back-top{opacity:1}.toggle.horizontal.flip-container .front-bottom{opacity:0}.toggle.vertical.flip-container .flipper{transform:rotateY(-180deg);-moz-transform:rotateY(-180deg);-webkit-transform:rotateY(-180deg)}.toggle.vertical.flip-container .back-left{opacity:1}.toggle.vertical.flip-container .front-right{opacity:0}.flipper{position:absolute;width:100%;height:100%;top:0;left:0;transition:.5s;-webkit-transition:.5s;-moz-transition:.5s;transition-timing-function:linear;-webkit-transition-timing-function:linear;-moz-transition-timing-function:linear;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.back-bottom,.back-top,.front-bottom,.front-top{max-height:calc(1 * var(--image-height) / 2 + 2px);max-width:var(--image-width);overflow:hidden;margin:0}.back-bottom img,.back-top img,.front-bottom img,.front-top img{display:block;width:var(--image-width)}.front-top{top:0;z-index:10}.front-bottom,.front-top{position:absolute;left:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}.front-bottom{bottom:0;z-index:1;opacity:1;transition:opacity .5s;-webkit-transition:opacity .5s;-moz-transition:opacity .5s;transition-timing-function:ease-in;-webkit-transition-timing-function:ease-in;-moz-transition-timing-function:ease-in}.front-top img{margin-bottom:calc(-1 * var(--image-height) / 2 + 2px)}.front-bottom img{margin-top:calc(-1 * var(--image-height) / 2)}.back-top{opacity:0;transition:opacity .5s;-webkit-transition:opacity .5s;-moz-transition:opacity .5s;transition-timing-function:ease-in;-webkit-transition-timing-function:ease-in;-moz-transition-timing-function:ease-in;z-index:-2}.back-bottom,.back-top{position:absolute;top:0;left:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}.back-bottom{z-index:5}.back-top img{margin-bottom:calc(-1 * var(--image-height) / 2 + 2px)}.back-bottom img{margin-top:calc(-1 * var(--image-height) / 2)}.front-top{transform:rotateX(0deg);-moz-transform:rotateX(0deg);-webkit-transform:rotateX(0deg)}.back-bottom{transform:rotateX(180deg);-moz-transform:rotateX(180deg);-webkit-transform:rotateX(180deg)}.back-left,.back-right,.front-left,.front-right{max-height:var(--image-height);max-width:calc(1 * var(--image-width) / 2 + 2px);overflow:hidden;margin:0}.back-left img,.back-right img,.front-left img,.front-right img{display:block;width:var(--image-width)}.front-left{left:0;z-index:10}.front-left,.front-right{position:absolute;top:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}.front-right{left:50%;z-index:1;opacity:1;transition:opacity .5s;-webkit-transition:opacity .5s;-moz-transition:opacity .5s;transition-timing-function:ease-in;-webkit-transition-timing-function:ease-in;-moz-transition-timing-function:ease-in}.front-left img{margin-right:calc(-1 * var(--image-width) / 2 + 2px)}.front-right img{margin-left:calc(-1 * var(--image-width) / 2)}.back-left{opacity:0;transition:opacity .5s;-webkit-transition:opacity .5s;-moz-transition:opacity .5s;transition-timing-function:ease-in;-webkit-transition-timing-function:ease-in;-moz-transition-timing-function:ease-in;z-index:-2}.back-left,.back-right{position:absolute;top:0;left:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}.back-right{z-index:5}.back-left img{margin-right:calc(-1 * var(--image-width) / 2 + 2px)}.back-right img{margin-left:calc(-1 * var(--image-width) / 2)}.front-left{transform:rotateY(0deg);-moz-transform:rotateY(0deg);-webkit-transform:rotateY(0deg)}.back-right{transform:rotateY(180deg);-moz-transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}"}};export{o as jeep_flipimages};